<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">


        <link rel="stylesheet" type="text/css" href="tomcatStyle.css">
        <script src="allpackfunction.js" type="text/javascript"></script>
        <title>Tomcat完整版</title>
        <script>
            $(function(){
                //開始定時器，str為按鈕名稱來改照片名，num為照片數-1(0~24則有24張)
                var timer=null;
                var index=0;
                var ocat=$("cat");
                var op=document.getElementsByTagName("p")[0];
                var obt=op.getElementsByTagName("img");
                var isclick=0;
                var action=[ "cymbal","drink","eat","fart","pie","scratch"];
                var actionphoto=[12,80,39,27,23,55];
                startTimer("angry",25);
                function startTimer(str,num){
                    if(timer==null){
                        timer=setInterval(function(){
                            index++;
                            if(index==num){
                                index=0;
                            }
                            console.log(index);
                            ocat.src="動畫照片/"+str+"/"+str+"_"+format(index,num)+".jpg";
                        },90);

                    }
                }

                function format(i,n1){
                    var istr=i.toString();//把index轉換成string勘是幾位數
                    var n1str=n1.toString();//把num轉換成string勘是幾位數
                    while(istr.length<n1str.length){
                        istr="0"+istr;
                    }
                    return istr;
                }
                //停止定時器
                function stopTimer(){
                    clearInterval(timer);
                    timer=null;
                }
                for(var j=0;j<obt.length;j++){
                    obt[j].serial=j;
                    var actstring="";
                    var actphoto=0;
                    obt[j].onclick=function(){
                        index=0;
                        stopTimer();
                        isclick=this.serial;
                        actstring=action[isclick];
                        actphoto=actionphoto[isclick];
                        console.log(actstring);
                        startTimer(actstring,actphoto);
                    }

                }
                //可以用list存就好
                function act(n){
                    var actstr="";
                    switch(n){
                        case 1:
                            actstr="cymbal";
                            break;
                        case 2:
                            actstr="drink";
                            break;
                        case 3:
                            actstr="eat";
                            break;
                        case 4:
                            actstr="fart";
                            break;
                        case 5:
                            actstr="pie";
                            break;
                        case 6:
                            actstr="scratch";
                            break;
                    }
                    return actstr;
                }
                function photo(n1){
                    var num=0;
                    switch(n1){
                        case 1:
                            num=12;
                            break;
                        case 2:
                            num=80;
                            break;
                        case 3:
                            num=39;
                            break;
                        case 4:
                            num=27;
                            break;
                        case 5:
                            num=23;
                            break;
                        case 6:
                            num=55;
                            break;
                    }
                    return num;
                }

            })
        </script>


    </head>

    <body>
        <div id="tomcat">
            <img id="cat" src="動畫照片/angry/angry_00.jpg">
            <p>
                <img class="im1" src="動畫照片/Buttons/cymbal.png">
                <img class="im2" src="動畫照片/Buttons/drink.png">
                <br>
                <img class="im1" src="動畫照片/Buttons/eat.png">
                <img class="im2" src="動畫照片/Buttons/fart.png">
                <br>
                <img class="im1" src="動畫照片/Buttons/pie.png">
                <img class="im2" src="動畫照片/Buttons/scratch.png">
            </p>

        </div>
    </body>
</html>