<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">


        <link rel="stylesheet" type="text/css" href="tomcatStyle.css">
        <script src="allpackfunction.js" type="text/javascript"></script>
        <title>Tomcat完整版</title>
        <script>
            $(function(){
                //開始定時器，str為按鈕名稱來改照片名，num為照片數-1(0~24則有24張)
                var timer=null;
                var index=0;
                var ocat=$("cat");
                var op=document.getElementsByTagName("p")[0];
                var obt=op.getElementsByTagName("img");
                var isclick=0;//存被點到的動作的index
                //用list存就不用用switch來判斷
                var action=[ "cymbal","drink","eat","fart","pie","scratch"];//動作名稱
                var actionphoto=[12,80,39,27,23,55];//每種動作的照片張數
                
                startTimer("angry",25);//一開始未執行任何動作時，做生氣的動作
                
                //定時期開始，str代表動作名稱，num代表照片張數
                function startTimer(str,num){
                    if(timer==null){
                        timer=setInterval(function(){
                            index++;
                            if(index==num){
                                index=0;
                            }
                            ocat.src="動畫照片/"+str+"/"+str+"_"+format(index,num)+".jpg";
                        },90);

                    }
                }
                
                //將數字0轉換成00
                function format(i,n1){
                    var istr=i.toString();//把index轉換成string勘是幾位數
                    var n1str=n1.toString();//把num轉換成string勘是幾位數
                    while(istr.length<n1str.length){
                        istr="0"+istr;
                    }
                    return istr;
                }
                //停止定時器
                function stopTimer(){
                    clearInterval(timer);
                    timer=null;
                }
                //點擊事件
                for(var j=0;j<obt.length;j++){
                    obt[j].serial=j;
                    obt[j].onclick=function(){
                        index=0;
                        stopTimer();
                        isclick=this.serial;
                        startTimer(action[isclick],actionphoto[isclick]);
                    }

                }
       
        </script>


    </head>

    <body>
        <div id="tomcat">
            <img id="cat" src="動畫照片/angry/angry_00.jpg">
            <p>
                <img class="im1" src="動畫照片/Buttons/cymbal.png">
                <img class="im2" src="動畫照片/Buttons/drink.png">
                <br>
                <img class="im1" src="動畫照片/Buttons/eat.png">
                <img class="im2" src="動畫照片/Buttons/fart.png">
                <br>
                <img class="im1" src="動畫照片/Buttons/pie.png">
                <img class="im2" src="動畫照片/Buttons/scratch.png">
            </p>

        </div>
    </body>
</html>
